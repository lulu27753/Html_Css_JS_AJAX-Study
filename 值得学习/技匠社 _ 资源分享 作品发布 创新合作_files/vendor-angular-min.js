!function(){"use strict";angular.module("base64",[]).constant("$base64",function(){function e(e,t){var i=s.indexOf(e.charAt(t));if(-1==i)throw"Cannot decode base64";return i}function t(t){t=""+t;var i,r,s,o=t.length;if(0==o)return t;if(0!=o%4)throw"Cannot decode base64";i=0,t.charAt(o-1)==n&&(i=1,t.charAt(o-2)==n&&(i=2),o-=4);var a=[];for(r=0;o>r;r+=4)s=e(t,r)<<18|e(t,r+1)<<12|e(t,r+2)<<6|e(t,r+3),a.push(String.fromCharCode(s>>16,255&s>>8,255&s));switch(i){case 1:s=e(t,r)<<18|e(t,r+1)<<12|e(t,r+2)<<6,a.push(String.fromCharCode(s>>16,255&s>>8));break;case 2:s=e(t,r)<<18|e(t,r+1)<<12,a.push(String.fromCharCode(s>>16))}return a.join("")}function i(e,t){var i=e.charCodeAt(t);if(i>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return i}function r(e){if(1!=arguments.length)throw"SyntaxError: Not enough arguments";var t,r,o=[];e=""+e;var a=e.length-e.length%3;if(0==e.length)return e;for(t=0;a>t;t+=3)r=i(e,t)<<16|i(e,t+1)<<8|i(e,t+2),o.push(s.charAt(r>>18)),o.push(s.charAt(63&r>>12)),o.push(s.charAt(63&r>>6)),o.push(s.charAt(63&r));switch(e.length-a){case 1:r=i(e,t)<<16,o.push(s.charAt(r>>18)+s.charAt(63&r>>12)+n+n);break;case 2:r=i(e,t)<<16|i(e,t+1)<<8,o.push(s.charAt(r>>18)+s.charAt(63&r>>12)+s.charAt(63&r>>6)+n)}return o.join("")}var n="=",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return{encode:r,decode:t}}())}(),/**
 * An Angular module that gives you access to the browsers local storage
 * @version v0.2.2 - 2015-05-29
 * @link https://github.com/grevory/angular-local-storage
 * @author grevory <greg@gregpike.ca>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,t,i){"use strict";var r=t.isDefined,n=t.isUndefined,s=t.isNumber,o=t.isObject,a=t.isArray,l=t.extend,u=t.toJson,f=t.module("LocalStorageModule",[]);f.provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(e){return this.prefix=e,this},this.setStorageType=function(e){return this.storageType=e,this},this.setStorageCookie=function(e,t){return this.cookie.expiry=e,this.cookie.path=t,this},this.setStorageCookieDomain=function(e){return this.cookie.domain=e,this},this.setNotify=function(e,t){return this.notify={setItem:e,removeItem:t},this},this.$get=["$rootScope","$window","$document","$parse",function(e,t,i,f){var h,c=this,d=c.prefix,p=c.cookie,g=c.notify,v=c.storageType;i?i[0]&&(i=i[0]):i=document,"."!==d.substr(-1)&&(d=d?d+".":"");var w=function(e){return d+e},m=function(){try{var i=v in t&&null!==t[v],r=w("__"+Math.round(1e7*Math.random()));return i&&(h=t[v],h.setItem(r,""),h.removeItem(r)),i}catch(n){return v="cookie",e.$broadcast("LocalStorageModule.notification.error",n.message),!1}}(),b=function(t,i){if(i=n(i)?null:u(i),!m||"cookie"===c.storageType)return m||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),g.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:i,storageType:"cookie"}),E(t,i);try{h&&h.setItem(w(t),i),g.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:i,storageType:c.storageType})}catch(r){return e.$broadcast("LocalStorageModule.notification.error",r.message),E(t,i)}return!0},y=function(t){if(!m||"cookie"===c.storageType)return m||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),C(t);var i=h?h.getItem(w(t)):null;if(!i||"null"===i)return null;try{return JSON.parse(i)}catch(r){return i}},S=function(){var t,i;for(t=0;t<arguments.length;t++)if(i=arguments[t],m&&"cookie"!==c.storageType)try{h.removeItem(w(i)),g.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:i,storageType:c.storageType})}catch(r){e.$broadcast("LocalStorageModule.notification.error",r.message),T(i)}else m||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),g.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:i,storageType:"cookie"}),T(i)},k=function(){if(!m)return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var t=d.length,i=[];for(var r in h)if(r.substr(0,t)===d)try{i.push(r.substr(t))}catch(n){return e.$broadcast("LocalStorageModule.notification.error",n.Description),[]}return i},O=function(t){var i=d?new RegExp("^"+d):new RegExp,r=t?new RegExp(t):new RegExp;if(!m||"cookie"===c.storageType)return m||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),j();var n=d.length;for(var s in h)if(i.test(s)&&r.test(s.substr(n)))try{S(s.substr(n))}catch(o){return e.$broadcast("LocalStorageModule.notification.error",o.message),j()}return!0},x=function(){try{return t.navigator.cookieEnabled||"cookie"in i&&(i.cookie.length>0||(i.cookie="test").indexOf.call(i.cookie,"test")>-1)}catch(r){return e.$broadcast("LocalStorageModule.notification.error",r.message),!1}}(),E=function(t,r,l){if(n(r))return!1;if((a(r)||o(r))&&(r=u(r)),!x)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var f="",h=new Date,c="";if(null===r?(h.setTime(h.getTime()+-864e5),f="; expires="+h.toGMTString(),r=""):s(l)&&0!==l?(h.setTime(h.getTime()+24*l*60*60*1e3),f="; expires="+h.toGMTString()):0!==p.expiry&&(h.setTime(h.getTime()+24*p.expiry*60*60*1e3),f="; expires="+h.toGMTString()),t){var d="; path="+p.path;p.domain&&(c="; domain="+p.domain),i.cookie=w(t)+"="+encodeURIComponent(r)+f+d+c}}catch(g){return e.$broadcast("LocalStorageModule.notification.error",g.message),!1}return!0},C=function(t){if(!x)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var r=i.cookie&&i.cookie.split(";")||[],n=0;n<r.length;n++){for(var s=r[n];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(w(t)+"=")){var o=decodeURIComponent(s.substring(d.length+t.length+1,s.length));try{return JSON.parse(o)}catch(a){return o}}}return null},T=function(e){E(e,null)},j=function(){for(var e=null,t=d.length,r=i.cookie.split(";"),n=0;n<r.length;n++){for(e=r[n];" "===e.charAt(0);)e=e.substring(1,e.length);var s=e.substring(t,e.indexOf("="));T(s)}},P=function(){return v},A=function(e,t,i,n){n=n||t;var s=y(n);return null===s&&r(i)?s=i:o(s)&&o(i)&&(s=l(i,s)),f(t).assign(e,s),e.$watch(t,function(e){b(n,e)},o(e[t]))},I=function(){for(var e=0,i=t[v],r=0;r<i.length;r++)0===i.key(r).indexOf(d)&&e++;return e};return{isSupported:m,getStorageType:P,set:b,add:b,get:y,keys:k,remove:S,clearAll:O,bind:A,deriveKey:w,length:I,cookie:{isSupported:x,set:E,add:E,get:C,remove:T,clearAll:j}}}]})}(window,window.angular);var mod;mod=angular.module("infinite-scroll",[]),mod.directive("infiniteScroll",["$rootScope","$window","$timeout",function(e,t,i){return{link:function(r,n,s){var o,a,l,u;return t=angular.element(t),l=0,null!=s.infiniteScrollDistance&&r.$watch(s.infiniteScrollDistance,function(e){return l=parseInt(e,10)}),u=!0,o=!1,null!=s.infiniteScrollDisabled&&r.$watch(s.infiniteScrollDisabled,function(e){return u=!e,u&&o?(o=!1,a()):void 0}),a=function(){var i,a,f,h;return h=t.height()+t.scrollTop(),i=n.offset().top+n.height(),a=i-h,f=t.height()*l>=a,f&&u?e.$$phase?r.$eval(s.infiniteScroll):r.$apply(s.infiniteScroll):f?o=!0:void 0},t.on("scroll",a),r.$on("$destroy",function(){return t.off("scroll",a)}),i(function(){return s.infiniteScrollImmediateCheck?r.$eval(s.infiniteScrollImmediateCheck)?a():void 0:a()},0)}}}]),!function(e,t,i){"use strict";function r(t){if(this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.slice&&!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice),this.support){this.supportDirectory=/Chrome/.test(e.navigator.userAgent),this.files=[],this.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",testMethod:"GET",uploadMethod:"POST",prioritizeFirstAndLastChunk:!1,allowDuplicateUploads:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,415,500,501],successStatuses:[200,201,202],onDropStopPropagation:!1,initFileFn:null,readFileFn:s},this.opts={},this.events={};var i=this;this.onDrop=function(e){i.opts.onDropStopPropagation&&e.stopPropagation(),e.preventDefault();var t=e.dataTransfer;t.items&&t.items[0]&&t.items[0].webkitGetAsEntry?i.webkitReadDataTransfer(e):i.addFiles(t.files,e)},this.preventEvent=function(e){e.preventDefault()},this.opts=r.extend({},this.defaults,t||{})}}function n(e,t){this.flowObj=e,this.bytes=null,this.file=t,this.name=t.fileName||t.name,this.size=t.size,this.relativePath=t.relativePath||t.webkitRelativePath||this.name,this.uniqueIdentifier=e.generateUniqueIdentifier(t),this.chunks=[],this.paused=!1,this.error=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}function s(e,t,i,r,n){var s="slice";e.file.slice?s="slice":e.file.mozSlice?s="mozSlice":e.file.webkitSlice&&(s="webkitSlice"),n.readFinished(e.file[s](t,i,r))}function o(e,t,i){this.flowObj=e,this.fileObj=t,this.offset=i,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.readState=0,this.loaded=0,this.total=0,this.chunkSize=this.flowObj.opts.chunkSize,this.startByte=this.offset*this.chunkSize,this.computeEndByte=function(){var e=Math.min(this.fileObj.size,(this.offset+1)*this.chunkSize);return this.fileObj.size-e<this.chunkSize&&!this.flowObj.opts.forceChunkSize&&(e=this.fileObj.size),e},this.endByte=this.computeEndByte(),this.xhr=null;var r=this;this.event=function(e,t){t=Array.prototype.slice.call(arguments),t.unshift(r),r.fileObj.chunkEvent.apply(r.fileObj,t)},this.progressHandler=function(e){e.lengthComputable&&(r.loaded=e.loaded,r.total=e.total),r.event("progress",e)},this.testHandler=function(e){var t=r.status(!0);"error"===t?(r.event(t,r.message()),r.flowObj.uploadNextChunk()):"success"===t?(r.tested=!0,r.event(t,r.message()),r.flowObj.uploadNextChunk()):r.fileObj.paused||(r.tested=!0,r.send())},this.doneHandler=function(e){var t=r.status();if("success"===t||"error"===t)delete this.data,r.event(t,r.message()),r.flowObj.uploadNextChunk();else{r.event("retry",r.message()),r.pendingRetry=!0,r.abort(),r.retries++;var i=r.flowObj.opts.chunkRetryInterval;null!==i?setTimeout(function(){r.send()},i):r.send()}}}function a(e,t){var i=e.indexOf(t);i>-1&&e.splice(i,1)}function l(e,t){return"function"==typeof e&&(t=Array.prototype.slice.call(arguments),e=e.apply(null,t.slice(1))),e}function u(e,t){setTimeout(e.bind(t),0)}function f(e,t){return h(arguments,function(t){t!==e&&h(t,function(t,i){e[i]=t})}),e}function h(e,t,i){if(e){var r;if("undefined"!=typeof e.length){for(r=0;r<e.length;r++)if(t.call(i,e[r],r)===!1)return}else for(r in e)if(e.hasOwnProperty(r)&&t.call(i,e[r],r)===!1)return}}var c=e.navigator.msPointerEnabled;r.prototype={on:function(e,t){e=e.toLowerCase(),this.events.hasOwnProperty(e)||(this.events[e]=[]),this.events[e].push(t)},off:function(e,t){e!==i?(e=e.toLowerCase(),t!==i?this.events.hasOwnProperty(e)&&a(this.events[e],t):delete this.events[e]):this.events={}},fire:function(e,t){t=Array.prototype.slice.call(arguments),e=e.toLowerCase();var i=!1;return this.events.hasOwnProperty(e)&&h(this.events[e],function(e){i=e.apply(this,t.slice(1))===!1||i},this),"catchall"!=e&&(t.unshift("catchAll"),i=this.fire.apply(this,t)===!1||i),!i},webkitReadDataTransfer:function(e){function t(e){e.readEntries(function(s){s.length?(o+=s.length,h(s,function(e){if(e.isFile){var n=e.fullPath;e.file(function(e){i(e,n)},r)}else e.isDirectory&&t(e.createReader())}),t(e)):n()},r)}function i(e,t){e.relativePath=t.substring(1),a.push(e),n()}function r(e){throw e}function n(){0==--o&&s.addFiles(a,e)}var s=this,o=e.dataTransfer.items.length,a=[];h(e.dataTransfer.items,function(e){var r=e.webkitGetAsEntry();return r?void(r.isFile?i(e.getAsFile(),r.fullPath):t(r.createReader())):void n()})},generateUniqueIdentifier:function(e){var t=this.opts.generateUniqueIdentifier;if("function"==typeof t)return t(e);var i=e.relativePath||e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+i.replace(/[^0-9a-zA-Z_-]/gim,"")},uploadNextChunk:function(e){var t=!1;if(this.opts.prioritizeFirstAndLastChunk&&(h(this.files,function(e){return!e.paused&&e.chunks.length&&"pending"===e.chunks[0].status()?(e.chunks[0].send(),t=!0,!1):!e.paused&&e.chunks.length>1&&"pending"===e.chunks[e.chunks.length-1].status()?(e.chunks[e.chunks.length-1].send(),t=!0,!1):void 0}),t))return t;if(h(this.files,function(e){return e.paused||h(e.chunks,function(e){return"pending"===e.status()?(e.send(),t=!0,!1):void 0}),t?!1:void 0}),t)return!0;var i=!1;return h(this.files,function(e){return e.isComplete()?void 0:(i=!0,!1)}),i||e||u(function(){this.fire("complete")},this),!1},assignBrowse:function(e,i,r,n){"undefined"==typeof e.length&&(e=[e]),h(e,function(e){var s;"INPUT"===e.tagName&&"file"===e.type?s=e:(s=t.createElement("input"),s.setAttribute("type","file"),f(s.style,{visibility:"hidden",position:"absolute",width:"1px",height:"1px"}),e.appendChild(s),e.addEventListener("click",function(){s.click()},!1)),this.opts.singleFile||r||s.setAttribute("multiple","multiple"),i&&s.setAttribute("webkitdirectory","webkitdirectory"),h(n,function(e,t){s.setAttribute(t,e)});var o=this;s.addEventListener("change",function(e){e.target.value&&(o.addFiles(e.target.files,e),e.target.value="")},!1)},this)},assignDrop:function(e){"undefined"==typeof e.length&&(e=[e]),h(e,function(e){e.addEventListener("dragover",this.preventEvent,!1),e.addEventListener("dragenter",this.preventEvent,!1),e.addEventListener("drop",this.onDrop,!1)},this)},unAssignDrop:function(e){"undefined"==typeof e.length&&(e=[e]),h(e,function(e){e.removeEventListener("dragover",this.preventEvent),e.removeEventListener("dragenter",this.preventEvent),e.removeEventListener("drop",this.onDrop)},this)},isUploading:function(){var e=!1;return h(this.files,function(t){return t.isUploading()?(e=!0,!1):void 0}),e},_shouldUploadNext:function(){var e=0,t=!0,i=this.opts.simultaneousUploads;return h(this.files,function(r){h(r.chunks,function(r){return"uploading"===r.status()&&(e++,e>=i)?(t=!1,!1):void 0})}),t&&e},upload:function(){var e=this._shouldUploadNext();if(e!==!1){this.fire("uploadStart");for(var t=!1,i=1;i<=this.opts.simultaneousUploads-e;i++)t=this.uploadNextChunk(!0)||t;t||u(function(){this.fire("complete")},this)}},resume:function(){h(this.files,function(e){e.resume()})},pause:function(){h(this.files,function(e){e.pause()})},cancel:function(){for(var e=this.files.length-1;e>=0;e--)this.files[e].cancel()},progress:function(){var e=0,t=0;return h(this.files,function(i){e+=i.progress()*i.size,t+=i.size}),t>0?e/t:0},addFile:function(e,t){this.addFiles([e],t)},addFiles:function(e,t){var i=[];h(e,function(e){if((!c||c&&e.size>0)&&(e.size%4096!==0||"."!==e.name&&"."!==e.fileName)&&(this.opts.allowDuplicateUploads||!this.getFromUniqueIdentifier(this.generateUniqueIdentifier(e)))){var r=new n(this,e);this.fire("fileAdded",r,t)&&i.push(r)}},this),this.fire("filesAdded",i,t)&&h(i,function(e){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(e)},this),this.fire("filesSubmitted",i,t)},removeFile:function(e){for(var t=this.files.length-1;t>=0;t--)this.files[t]===e&&(this.files.splice(t,1),e.abort())},getFromUniqueIdentifier:function(e){var t=!1;return h(this.files,function(i){i.uniqueIdentifier===e&&(t=i)}),t},getSize:function(){var e=0;return h(this.files,function(t){e+=t.size}),e},sizeUploaded:function(){var e=0;return h(this.files,function(t){e+=t.sizeUploaded()}),e},timeRemaining:function(){var e=0,t=0;return h(this.files,function(i){i.paused||i.error||(e+=i.size-i.sizeUploaded(),t+=i.averageSpeed)}),e&&!t?Number.POSITIVE_INFINITY:e||t?Math.floor(e/t):0}},n.prototype={measureSpeed:function(){var e=Date.now()-this._lastProgressCallback;if(e){var t=this.flowObj.opts.speedSmoothingFactor,i=this.sizeUploaded();this.currentSpeed=Math.max((i-this._prevUploadedSize)/e*1e3,0),this.averageSpeed=t*this.currentSpeed+(1-t)*this.averageSpeed,this._prevUploadedSize=i}},chunkEvent:function(e,t,i){switch(t){case"progress":if(Date.now()-this._lastProgressCallback<this.flowObj.opts.progressCallbacksInterval)break;this.measureSpeed(),this.flowObj.fire("fileProgress",this,e),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now();break;case"error":this.error=!0,this.abort(!0),this.flowObj.fire("fileError",this,i,e),this.flowObj.fire("error",i,this,e);break;case"success":if(this.error)return;this.measureSpeed(),this.flowObj.fire("fileProgress",this,e),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now(),this.isComplete()&&(this.currentSpeed=0,this.averageSpeed=0,this.flowObj.fire("fileSuccess",this,i,e));break;case"retry":this.flowObj.fire("fileRetry",this,e)}},pause:function(){this.paused=!0,this.abort()},resume:function(){this.paused=!1,this.flowObj.upload()},abort:function(e){this.currentSpeed=0,this.averageSpeed=0;var t=this.chunks;e&&(this.chunks=[]),h(t,function(e){"uploading"===e.status()&&(e.abort(),this.flowObj.uploadNextChunk())},this)},cancel:function(){this.flowObj.removeFile(this)},retry:function(){this.bootstrap(),this.flowObj.upload()},bootstrap:function(){"function"==typeof this.flowObj.opts.initFileFn&&this.flowObj.opts.initFileFn(this),this.abort(!0),this.error=!1,this._prevProgress=0;for(var e=this.flowObj.opts.forceChunkSize?Math.ceil:Math.floor,t=Math.max(e(this.size/this.flowObj.opts.chunkSize),1),i=0;t>i;i++)this.chunks.push(new o(this.flowObj,this,i))},progress:function(){if(this.error)return 1;if(1===this.chunks.length)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),this._prevProgress;var e=0;h(this.chunks,function(t){e+=t.progress()*(t.endByte-t.startByte)});var t=e/this.size;return this._prevProgress=Math.max(this._prevProgress,t>.9999?1:t),this._prevProgress},isUploading:function(){var e=!1;return h(this.chunks,function(t){return"uploading"===t.status()?(e=!0,!1):void 0}),e},isComplete:function(){var e=!1;return h(this.chunks,function(t){var i=t.status();return"pending"===i||"uploading"===i||"reading"===i||1===t.preprocessState||1===t.readState?(e=!0,!1):void 0}),!e},sizeUploaded:function(){var e=0;return h(this.chunks,function(t){e+=t.sizeUploaded()}),e},timeRemaining:function(){if(this.paused||this.error)return 0;var e=this.size-this.sizeUploaded();return e&&!this.averageSpeed?Number.POSITIVE_INFINITY:e||this.averageSpeed?Math.floor(e/this.averageSpeed):0},getType:function(){return this.file.type&&this.file.type.split("/")[1]},getExtension:function(){return this.name.substr((~-this.name.lastIndexOf(".")>>>0)+2).toLowerCase()}},o.prototype={getParams:function(){return{flowChunkNumber:this.offset+1,flowChunkSize:this.flowObj.opts.chunkSize,flowCurrentChunkSize:this.endByte-this.startByte,flowTotalSize:this.fileObj.size,flowIdentifier:this.fileObj.uniqueIdentifier,flowFilename:this.fileObj.name,flowRelativePath:this.fileObj.relativePath,flowTotalChunks:this.fileObj.chunks.length}},getTarget:function(e,t){return e+=e.indexOf("?")<0?"?":"&",e+t.join("&")},test:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",this.testHandler,!1),this.xhr.addEventListener("error",this.testHandler,!1);var e=l(this.flowObj.opts.testMethod,this.fileObj,this),t=this.prepareXhrRequest(e,!0);this.xhr.send(t)},preprocessFinished:function(){this.endByte=this.computeEndByte(),this.preprocessState=2,this.send()},readFinished:function(e){this.readState=2,this.bytes=e,this.send()},send:function(){var e=this.flowObj.opts.preprocess,t=this.flowObj.opts.readFileFn;if("function"==typeof e)switch(this.preprocessState){case 0:return this.preprocessState=1,void e(this);case 1:return}switch(this.readState){case 0:return this.readState=1,void t(this.fileObj,this.startByte,this.endByte,this.fileType,this);case 1:return}if(this.flowObj.opts.testChunks&&!this.tested)return void this.test();this.loaded=0,this.total=0,this.pendingRetry=!1,this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",this.progressHandler,!1),this.xhr.addEventListener("load",this.doneHandler,!1),this.xhr.addEventListener("error",this.doneHandler,!1);var i=l(this.flowObj.opts.uploadMethod,this.fileObj,this),r=this.prepareXhrRequest(i,!1,this.flowObj.opts.method,this.bytes);this.xhr.send(r)},abort:function(){var e=this.xhr;this.xhr=null,e&&e.abort()},status:function(e){return 1===this.readState?"reading":this.pendingRetry||1===this.preprocessState?"uploading":this.xhr?this.xhr.readyState<4?"uploading":this.flowObj.opts.successStatuses.indexOf(this.xhr.status)>-1?"success":this.flowObj.opts.permanentErrors.indexOf(this.xhr.status)>-1||!e&&this.retries>=this.flowObj.opts.maxChunkRetries?"error":(this.abort(),"pending"):"pending"},message:function(){return this.xhr?this.xhr.responseText:""},progress:function(){if(this.pendingRetry)return 0;var e=this.status();return"success"===e||"error"===e?1:"pending"===e?0:this.total>0?this.loaded/this.total:0},sizeUploaded:function(){var e=this.endByte-this.startByte;return"success"!==this.status()&&(e=this.progress()*e),e},prepareXhrRequest:function(e,t,i,r){var n=l(this.flowObj.opts.query,this.fileObj,this,t);n=f(n,this.getParams());var s=l(this.flowObj.opts.target,this.fileObj,this,t),o=null;if("GET"===e||"octet"===i){var a=[];h(n,function(e,t){a.push([encodeURIComponent(t),encodeURIComponent(e)].join("="))}),s=this.getTarget(s,a),o=r||null}else o=new FormData,h(n,function(e,t){o.append(t,e)}),o.append(this.flowObj.opts.fileParameterName,r,this.fileObj.file.name);return this.xhr.open(e,s,!0),this.xhr.withCredentials=this.flowObj.opts.withCredentials,h(l(this.flowObj.opts.headers,this.fileObj,this,t),function(e,t){this.xhr.setRequestHeader(t,e)},this),o}},r.evalOpts=l,r.extend=f,r.each=h,r.FlowFile=n,r.FlowChunk=o,r.version="2.10.1","object"==typeof module&&module&&"object"==typeof module.exports?module.exports=r:(e.Flow=r,"function"==typeof define&&define.amd&&define("flow",[],function(){return r}))}(window,document),angular.module("flow.provider",[]).provider("flowFactory",function(){"use strict";this.defaults={},this.factory=function(e){return new Flow(e)},this.events=[],this.on=function(e,t){this.events.push([e,t])},this.$get=function(){var e=this.factory,t=this.defaults,i=this.events;return{create:function(r){var n=e(angular.extend({},t,r));return angular.forEach(i,function(e){n.on(e[0],e[1])}),n}}}}),angular.module("flow.init",["flow.provider"]).controller("flowCtrl",["$scope","$attrs","$parse","flowFactory",function(e,t,i,r){var n=angular.extend({},e.$eval(t.flowInit)),s=e.$eval(t.flowObject)||r.create(n),o=function(t){var i=Array.prototype.slice.call(arguments);i.shift();var r=e.$broadcast.apply(e,["flow::"+t,s].concat(i));return{progress:1,filesSubmitted:1,fileSuccess:1,fileError:1,complete:1}[t]&&e.$apply(),r.defaultPrevented?!1:void 0};s.on("catchAll",o),e.$on("$destroy",function(){s.off("catchAll",o)}),e.$flow=s,t.hasOwnProperty("flowName")&&(i(t.flowName).assign(e,s),e.$on("$destroy",function(){i(t.flowName).assign(e)}))}]).directive("flowInit",[function(){return{scope:!0,controller:"flowCtrl"}}]),angular.module("flow.btn",["flow.init"]).directive("flowBtn",[function(){return{restrict:"EA",scope:!1,require:"^flowInit",link:function(e,t,i){var r=i.hasOwnProperty("flowDirectory"),n=i.hasOwnProperty("flowSingleFile"),s=i.hasOwnProperty("flowAttrs")&&e.$eval(i.flowAttrs);e.$flow.assignBrowse(t,r,n,s)}}}]),angular.module("flow.dragEvents",["flow.init"]).directive("flowPreventDrop",function(){return{scope:!1,link:function(e,t,i){t.bind("drop dragover",function(e){e.preventDefault()})}}}).directive("flowDragEnter",["$timeout",function(e){return{scope:!1,link:function(t,i,r){function n(e){var t=!1,i=e.dataTransfer||e.originalEvent.dataTransfer;return angular.forEach(i&&i.types,function(e){"Files"===e&&(t=!0)}),t}var s,o=!1;i.bind("dragover",function(i){n(i)&&(o||(t.$apply(r.flowDragEnter),o=!0),e.cancel(s),i.preventDefault())}),i.bind("dragleave drop",function(i){e.cancel(s),s=e(function(){t.$eval(r.flowDragLeave),s=null,o=!1},100)})}}}]),angular.module("flow.drop",["flow.init"]).directive("flowDrop",function(){return{scope:!1,require:"^flowInit",link:function(e,t,i){function r(){e.$flow.assignDrop(t)}function n(){e.$flow.unAssignDrop(t)}i.flowDropEnabled?e.$watch(i.flowDropEnabled,function(e){e?r():n()}):r()}}}),!function(e){"use strict";function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}var i=e.module("flow.events",["flow.init"]),r={fileSuccess:["$file","$message"],fileProgress:["$file"],fileAdded:["$file","$event"],filesAdded:["$files","$event"],filesSubmitted:["$files","$event"],fileRetry:["$file"],fileError:["$file","$message"],uploadStart:[],complete:[],progress:[],error:["$message","$file"]};e.forEach(r,function(r,n){var s="flow"+t(n);"flowUploadStart"==s&&(s="flowUploadStarted"),i.directive(s,[function(){return{require:"^flowInit",controller:["$scope","$attrs",function(t,i){t.$on("flow::"+n,function(){var n=Array.prototype.slice.call(arguments),o=n.shift();if(t.$flow===n.shift()){var a={};e.forEach(r,function(e,t){a[e]=n[t]}),t.$eval(i[s],a)===!1&&o.preventDefault()}})}]}}])})}(angular),angular.module("flow.img",["flow.init"]).directive("flowImg",[function(){return{scope:!1,require:"^flowInit",link:function(e,t,i){var r=i.flowImg;e.$watch(r,function(t){if(t){var r=new FileReader;r.readAsDataURL(t.file),r.onload=function(t){e.$apply(function(){i.$set("src",t.target.result)})}}})}}}]),angular.module("flow.transfers",["flow.init"]).directive("flowTransfers",[function(){return{scope:!0,require:"^flowInit",link:function(e){e.transfers=e.$flow.files}}}]),angular.module("flow",["flow.provider","flow.init","flow.events","flow.btn","flow.drop","flow.transfers","flow.img","flow.dragEvents"]);
//# sourceMappingURL=./vendor-angular-min.js.map