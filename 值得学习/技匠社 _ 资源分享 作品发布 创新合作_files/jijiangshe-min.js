"use strict";function galleryMasonaryLayout(){$(".masonary-gallery").length&&$(".masonary-gallery").isotope({layoutMode:"masonry"}),$(".portfolio-filter.masonary").length&&$(".portfolio-filter.masonary span").on("click",function(){var e=$(this),t=e.parent().data("filter");return $(".portfolio-filter.masonary span").parent().removeClass("active"),e.parent().addClass("active"),$(".masonary-gallery").isotope({filter:t}),!1})}function GalleryFilter(){$(".image-gallery").length&&$(".image-gallery").each(function(){var e=$(this),t=e.data("filter-class"),r=e.data("show-on-load");r&&e.mixItUp({load:{filter:"."+r},selectors:{filter:"."+t}}),e.mixItUp({selectors:{filter:"."+t}})})}function testimonialCarosule(){$(".testimonials-wrap .owl-carousel").length&&$(".testimonials-wrap .owl-carousel").owlCarousel({loop:!0,margin:0,nav:!1,dots:!0,items:2,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,responsive:{0:{items:1},480:{items:1},600:{items:1},1e3:{items:2}}})}function caseStudyCarousel(){$(".case-study-carousel .owl-carousel").length&&$(".case-study-carousel .owl-carousel").owlCarousel({loop:!0,margin:0,nav:!1,dots:!0,items:4,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0})}function SmoothMenuScroll(){var e=$(".scrollToLink");e.length&&e.children("a").bind("click",function(t){var r=$(this),o=r.height();$("html, body").stop().animate({scrollTop:$(r.attr("href")).offset().top-o+"px"},1200,"easeInOutExpo"),e.removeClass("current"),r.parent().addClass("current"),t.preventDefault()})}function OnePageMenuScroll(){var e=$(window).scrollTop();if(e>=100){var t=$(".navigation.scroll-menu");t.find(".scrollToLink a").each(function(){var r=$(this).attr("href");$(r).each(function(){if($(this).offset().top<=e+100){var o=$(r).attr("id");t.find("li").removeClass("current"),t.find("a[href=#"+o+"]").parent().addClass("current")}})})}else $(".mainmenu.one-page-scroll-menu li.current").removeClass("current"),$(".mainmenu.one-page-scroll-menu li:first").addClass("current")}function DeadMenuConfig(){var e=$(".navigation.scroll-menu"),t=e.find("li.deadLink");t.length&&t.each(function(){$(this).children("a").on("click",function(){return!1})})}function slidingGallery(){var e=$(".sliding-gallery .image-gallery");e.length&&e.bxSlider({minSlides:1,maxSlides:4,slideWidth:480,slideMargin:0,useCSS:!1,ticker:!0,autoHover:!0,tickerHover:!0,speed:1e5,infiniteLoop:!0})}function hiddenBarMenuConfig(){var e=$(".hidden-bar .main-menu");$(window).width()<=1024&&(e.find(".dropdown").children("a").append(function(){return'<button type="button" class="btn expander"><i class="fa fa-chevron-down"></i></button>'}),e.find(".btn.expander").each(function(){var e=$(this);e.on("click",function(){return e.parent().parent().children("ul").slideToggle(),e.parent().toggleClass("current"),e.find("i").toggleClass("fa-chevron-up fa-chevron-down"),!1})}))}function customScrollBarHiddenSidebar(){$(".hidden-bar-wrapper").length&&$(".hidden-bar-wrapper").mCustomScrollbar()}function hiddenBarToggler(){$(".hidden-bar-closer").length&&$(".hidden-bar-closer").on("click",function(){$(".hidden-bar.right-align").css({right:"-150%"}),$(".hidden-bar.left-align").css({left:"-150%"})}),$(".hidden-bar-opener").length&&$(".hidden-bar-opener").on("click",function(){$(".hidden-bar.right-align").css({right:"0%"}),$(".hidden-bar.left-align").css({left:"0%"})})}function handlePreloader(){$(".preloader").length&&$(".preloader").fadeOut()}function stickyHeader(){if($(".stricky").length){var e=$(".stricky").next().offset().top;$(window).scrollTop()>e?$(".stricky").addClass("stricky-fixed"):$(this).scrollTop()<=e&&$(".stricky").removeClass("stricky-fixed")}}function CounterNumberChanger(){var e=$(".sF-counter");e.length&&e.appear(function(){e.countTo()})}function progressBarConfig(){var e=$(".skills-name li");e.length&&e.each(function(){var e=$(this);e.appear(function(){var t=e.data("value");e.find(".progress-value-bar").animate({width:t+"%"},2e3),e.find(".value").countTo({from:0,to:t,speed:5e3})})})}function thmAccrodion(e){$(".accrodion-wrap").length&&($(".accrodion",e).find(".accrodion-header").eq(0).find(".expander").removeClass("plus").addClass("minus"),$(".accrodion",e).eq(0).addClass("active").find(".accrodion-content").slideDown(),$(".accrodion",e).each(function(){var t=$(this);t.find(".accrodion-header").on("click",function(){var t=$(this);t.parent().hasClass("active")===!1&&($(".accrodion",e).find(".accrodion-header").find(".expander").removeClass("minus").addClass("plus"),$(".accrodion",e).removeClass("active"),$(".accrodion",e).find(".accrodion-content").slideUp(),t.find(".expander").toggleClass("minus plus"),t.parent().addClass("active").find(".accrodion-content").slideToggle())})}))}function customTab(){if($(".tab-wrapper").length){var e=$(".tab-wrapper .tab-content"),t=$(".tab-wrapper .tab-title span");e.children("div").hide(),e.children("div").eq(0).show(),t.on("click",function(){var r=$(this),o=r.parent().data("tab-name");t.parent().removeClass("active"),r.parent().addClass("active");var n="."+o;return e.children("div").not(n).hide(),e.children("div"+n).fadeIn("500"),!1})}}function testimonialsCarosuleTwo(){$(".testimonials-style-two .owl-carousel").length&&$(".testimonials-style-two .owl-carousel").owlCarousel({loop:!0,margin:0,nav:!0,dots:!1,autoplay:!1,navText:['<i class="fa fa-long-arrow-left"></i>','<i class="fa fa-long-arrow-right"></i>'],autoplayHoverPause:!0,responsive:{0:{items:1},480:{items:1},600:{items:1},1e3:{items:1}}})}function backgroundSlider(){if($(".bg-slider").length)var e=$(".bg-slider.banner-one").vegas({timer:!1,transition:["fade2"],slides:[{src:"img/slides/image4.jpg"}]}),t=$(".bg-slider.banner-two").vegas({timer:!1,transition:["fade2"],slides:[{src:"http://static.jijiangshe.com/img/slides/bg.jpg"}]})}function typed(){$(".typed").length&&$(".typed").typed({stringsElement:$(".typed-strings"),typeSpeed:200,backDelay:1500,loop:!0,contentType:"html",loopCount:!1,callback:function(){},resetCallback:function(){newTyped()}})}function teamModal(){$("#single-team-modal").length&&$(".single-team-member").length&&$(".single-team-member .link-view").on("click",function(){var e=$(this).parents(".single-team-member"),t=e.find(".modal-content"),r=e.find(".person-name").text(),o=e.find(".person-image").attr("src"),n=t.find(".person-text").html();return $("#single-team-modal").find(".person-name").empty(),$("#single-team-modal").find(".img-holder img").attr("src",""),$("#single-team-modal").find(".person-text").empty(),$("#single-team-modal").find(".person-name").text(r),$("#single-team-modal").find(".img-holder img").attr("src",o),$("#single-team-modal").find(".person-text").append(n),$("#single-team-modal").modal("show"),!1})}function showDialog(e){$(".dialog-mask").addClass("animate"),$(e).addClass("animate"),$(".body-container").addClass("scale-down"),$("body").addClass("stop-scroll")}function closeDialog(){$(".dialog-mask").removeClass("animate"),$(".dialog").removeClass("animate"),$(".body-container").removeClass("scale-down"),$("body").removeClass("stop-scroll")}function showWechatCode(){showDialog(".dialog.wechat-dialog")}function showLoading(){$(".loading").addClass("animate bounceDown")}function hideLoading(){$(".loading").removeClass("animate bounceDown")}function showMessage(e,t){$(".system-message h2").text(e),"undefined"!=typeof t&&null!=t&&t.length>0&&$(".system-message p").text(t),$(".system-message").show(),$(".system-message").animateCss("active"),setTimeout('$(".system-message").animateCss("fadeOut")',2500)}var app=angular.module("techmaskApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngResource","infinite-scroll","flow","techmaskApp.services","techmaskApp.userManager","techmaskApp.resourceManager","techmaskApp.faqManager","techmaskApp.feedbackManager","techmaskApp.flagManager","techmaskApp.profileManager","techmaskApp.commentManager","techmaskApp.rankManager","techmaskApp.accountManager","techmaskApp.sidebarManager"]);angular.module("infinite-scroll").value("THROTTLE_MILLISECONDS",250),app.config(["$routeProvider","$httpProvider","$locationProvider",function(e,t,r){r.html5Mode({enabled:!0}),e.when("/",{templateUrl:"views/main.html?v=2.0",controller:"MainCtrl",controllerAs:"main"}).when("/login/:token",{templateUrl:"views/main.html?v=2.0",controller:"MainCtrl"}).when("/oauth/:authType/callback",{controller:"OAuthCallbackCtrl",templateUrl:"views/user/oauthCallback.html?v=2.0"}).when("/resources/:category",{templateUrl:"views/resource/resources.html?v=2.0",controller:"ResourceCtrl",controllerAs:"resource"}).when("/resources/:category/:subCategory",{templateUrl:"views/resource/resources.html?v=2.0",controller:"ResourceCtrl",controllerAs:"resource"}).when("/resource/:resourceId",{templateUrl:"views/resource/resourcePost.html?v=2.0",controller:"ResourceDetailCtrl",controllerAs:"resource"}).when("/crafts",{templateUrl:"views/resource/crafts.html?v=2.0",controller:"ResourceCtrl",controllerAs:"resource"}).when("/faq",{templateUrl:"views/faq.html?v=2.0",controller:"FaqCtrl"}).when("/contact",{templateUrl:"views/contact.html?v=2.0",controller:"FeedbackCtrl"}).when("/profile/:userId",{templateUrl:"views/profile/userProfile.html?v=2.0",controller:"UserProfileCtrl"}).when("/ranks",{templateUrl:"views/rank/ranks.html?v=2.0",controller:"RankCtrl",controllerAs:"rank"}).otherwise({redirectTo:"/"}),t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",t.interceptors.push("requestInterceptor"),t.interceptors.push("responseInterceptor")}]),app.factory("requestInterceptor",["$rootScope","$q","$window","$global",function(e,t,r,o){return{request:function(e){var r=o.getStorage("authToken");return angular.isDefined(r)&&(e.headers["X-Auth-Token"]=r),e||t.when(e)}}}]),app.factory("responseInterceptor",["$rootScope","$q","$window",function(e,t,r){return{request:function(e){return e.headers=e.headers||{},e},response:function(e){return e.data&&e.data.ERROR_MSG&&-1!==e.data.ERROR_MSG.indexOf("appException.unexpected.error")&&(hideLoading(),showMessage("系统出错啦","非常抱歉，系统出现异常，请稍后再试。")),e||t.when(e)}}}]),app.controller("AppCtrl",["$rootScope","$scope","$location","$timeout","UserService",function(e,t,r,o,n){e.authenticated=!1,e.isAuthenticating=!0,1!=r.path().indexOf("login")&&n.authenticateByToken(function(){e.isAuthenticating=!1}),t.$on("$routeChangeStart",function(t,o){angular.isDefined(r.path())&&"/"!=r.path()&&1!=r.path().indexOf("login")?e.isHomePage=!1:e.isHomePage=!0}),t.viewRegister=function(){e.registerInd=!0,showDialog(".dialog.register-and-login")},t.viewLogin=function(){closeDialog(),e.registerInd=!1,showDialog(".dialog.register-and-login"),$(".hidden-bar-closer").click()},t.toRegister=function(){$(".dialog.register-and-login").removeClass("animate"),e.registerInd=!0,o(function(){$(".dialog.register-and-login").addClass("animate")},100)},t.toLogin=function(){$(".dialog.register-and-login").removeClass("animate"),e.registerInd=!1,o(function(){$(".dialog.register-and-login").addClass("animate")},100)},t.toLogout=function(){n.logout(),$(".hidden-bar-closer").click()},t.toPage=function(e){r.path(e),$(".hidden-bar-closer").click()}}]),app.directive("bgslider",["$rootScope","$timeout",function(e,t){return{restrict:"A",link:function(t,r,o){t.$watch("$root.authenticated",function(){e.authenticated?($(".thm-btn.login").hide(),$(".thm-btn.register").hide(),$(".thm-btn.logout").show()):($(".thm-btn.logout").hide(),$(".thm-btn.login").show(),$(".thm-btn.register").show())},!0),backgroundSlider(),typed()}}}]),app.directive("testimonials",["$timeout",function(e){return{restrict:"A",link:function(e,t,r){e.$last&&setTimeout(function(){testimonialCarosule()},1)}}}]),app.directive("accrodion",["$timeout",function(e){return{restrict:"A",link:function(e,t,r){thmAccrodion(t)}}}]),app.directive("galleryfilter",["$timeout",function(e){return{restrict:"A",link:function(e,t,r){GalleryFilter()}}}]),app.directive("countnumberchanger",["$timeout",function(e){return{restrict:"A",link:function(e,t,r){CounterNumberChanger()}}}]),app.directive("ratingStars",["$timeout",function(e){return{scope:{ratingScore:"@"},transclude:!0,restrict:"E",replace:!0,template:'<div class="rating-stars" ng-show="ratingScore>0" ><i class="fa" ng-class="{true:\'fa-star\',false:\'fa-star-o\'}[ratingScore>0]"></i><i class="fa" ng-class="{true:\'fa-star\',false:\'fa-star-o\'}[ratingScore>2]"></i><i class="fa" ng-class="{true:\'fa-star\',false:\'fa-star-o\'}[ratingScore>4]"></i><i class="fa" ng-class="{true:\'fa-star\',false:\'fa-star-o\'}[ratingScore>6]"></i><i class="fa" ng-class="{true:\'fa-star\',false:\'fa-star-o\'}[ratingScore>8]"></i></div>',link:function(e,t,r){}}}]),app.directive("rating",["$timeout",function(e){return{scope:{rateModel:"=",ratingScore:"="},transclude:!0,restrict:"E",replace:!0,template:'<div class="rating"><div class="stars"><i class="fa" ng-class="{true:\'fa-star\',false:\'fa-star-o\'}[ratingScore>0]" ng-mouseenter="setHoverRating(2)" ng-mouseleave="resetHoverRating()" ng-click="setRating(2)"></i><i class="fa" ng-class="{true:\'fa-star\',false:\'fa-star-o\'}[ratingScore>2]" ng-mouseenter="setHoverRating(4)" ng-mouseleave="resetHoverRating()" ng-click="setRating(4)"></i><i class="fa" ng-class="{true:\'fa-star\',false:\'fa-star-o\'}[ratingScore>4]" ng-mouseenter="setHoverRating(6)" ng-mouseleave="resetHoverRating()" ng-click="setRating(6)"></i><i class="fa" ng-class="{true:\'fa-star\',false:\'fa-star-o\'}[ratingScore>6]" ng-mouseenter="setHoverRating(8)" ng-mouseleave="resetHoverRating()" ng-click="setRating(8)"></i><i class="fa" ng-class="{true:\'fa-star\',false:\'fa-star-o\'}[ratingScore>8]" ng-mouseenter="setHoverRating(10)" ng-mouseleave="resetHoverRating()" ng-click="setRating(10)"></i></div><div><span>{{ratingTitle}}</span></div></div>',link:function(e,t,r){e.$watch("rateModel",function(){angular.isDefined(e.rateModel)&&null!=e.rateModel&&0!=e.rateModel||(e.resetRateTitle(0),e.ratingScore=null)},!0),e.setRating=function(t){e.rateModel=t,e.ratingScore=t,e.resetRateTitle(t)},e.setHoverRating=function(t){e.ratingScore=t,e.resetRateTitle(t)},e.resetHoverRating=function(){e.ratingScore=e.rateModel,e.resetRateTitle(e.ratingScore)},e.resetRateTitle=function(t){0==t?e.ratingTitle="请选择":2==t?e.ratingTitle="很差，不推荐":4==t?e.ratingTitle="凑合，可以考虑":6==t?e.ratingTitle="一般，值得考虑":8==t?e.ratingTitle="不错，强烈推荐":10==t&&(e.ratingTitle="完美，绝对不容错过")}}}}]),app.directive("ratingLabel",["$timeout",function(e){return{scope:{rateValue:"="},transclude:!0,restrict:"E",replace:!0,template:'<span class="rating-label"><span class="int-part">{{integerPart}}</span><span class="decimal-part">.{{decimalPart}}</span></span>',link:function(e,t,r){e.$watch("rateValue",function(){e.rateValue>0?(e.integerPart=parseInt(10*e.rateValue/10),e.decimalPart=10*e.rateValue%10):(e.integerPart=0,e.decimalPart=0)},!0)}}}]),app.directive("popupSelect",["$timeout",function(e){return{scope:{datamodel:"=",options:"="},transclude:!0,restrict:"E",replace:!0,template:'<div class="dropdown"><a class="dropdown-toggle" id="drop3" role="button" aria-expanded="false" aria-haspopup="true" href="#" data-toggle="dropdown">{{selectedTitle}}<span class="caret"></span></a><ul class="dropdown-menu" aria-labelledby="drop3"><li ng-repeat="option in options" ng-click="select(option)" ng-hide="datamodel==option.name">{{option.title}}</li></ul></div>',link:function(e,t,r){e.selectedTitle=e.options[0].title,e.select=function(t){e.selectedTitle=t.title,e.datamodel=t.name}}}}]);var services=angular.module("techmaskApp.services",["LocalStorageModule"]);services.service("$global",["$rootScope","localStorageService",function(e,t){this.settings={CONTEXT_PATH:"http://jijiangshe.com:8443",APP_PATH:"http://jijiangshe.com",SITE_NAME:"技匠",SLOGON:"全栈修炼",NEXT_PATH:null,PAGE_SIZE:24},this.handleErrors=function(e){401===e?showMessage("不允许的操作","对不起，您没有进行此操作的权限。"):500===e&&showMessage("系统出错啦","非常抱歉，系统出现异常，请稍后再试。")},this.getSetting=function(e){return this.settings[e]},this.setSetting=function(e,t){this.settings[e]=t},this.setStorage=function(e,r){t.set(e,r)},this.getStorage=function(e){var r=null;return r=t.get(e)},this.removeStorage=function(e){return t.remove(e)},this.getAPIUrl=function(){return this.settings.CONTEXT_PATH},this.getAppPath=function(){return this.settings.APP_PATH},this.showMsg=function(e,t){},this.setTitle=function(t){e.title=t},this.getSiteName=function(){return this.settings.SITE_NAME},this.getSlogan=function(){return this.settings.SLOGON},this.preparePath=function(e){var t=this.settings.CONTEXT_PATH+e;return t.indexOf("?")<0&&(t+="?"),t},this.getPageSize=function(){return this.settings.PAGE_SIZE},this.getCloudStoragePath=function(){return"http://static.jijiangshe.com"}}]),services.service("ResourceService",["$http","$q","$rootScope","$global","ResourceView","FlagService","StatisticsService",function(e,t,r,o,n,a,i){this.loadAllResource=function(r){r.isLoading=!0;var n=t.defer(),a=o.preparePath("/resource/"+r.category+"/"+r.subCategory+"/"+r.pageNo);return"undefined"!=typeof r.keywords&&null!=r.keywords&&r.keywords.trim().length>0&&(a=o.preparePath("/resource/search/"+r.keywords+"/"+r.pageNo)),a+="&orderInd="+r.orderInd,a+="&resourceInd="+r.resourceInd,a+="&periodInd="+r.periodInd,e({method:"GET",url:a}).success(function(e,t,o,a){r.isLoading=!1,n.resolve(e)}).error(function(e,t,n,a){r.isLoading=!1,o.handleErrors(t)}),n.promise},this.loadAllUserResource=function(r){var n=t.defer(),a=o.preparePath("/resource/user/"+r.ownerId+"/"+r.filterType+"/"+r.pageNo);return e({method:"GET",url:a}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,r,n){o.handleErrors(t)}),n.promise},this.loadResourceDetail=function(r){var n=t.defer(),a=o.preparePath("/resource/"+r);return e({method:"GET",url:a}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,r,n){o.handleErrors(t)}),n.promise},this.addResource=function(r){var n=t.defer(),a=o.preparePath("/resource");return e({method:"POST",url:a,data:r}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,r,n){o.handleErrors(t)}),n.promise},this.updateResource=function(r){var n=t.defer(),a=o.preparePath("/resource");return e({method:"PUT",url:a,data:r}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,r,n){o.handleErrors(t)}),n.promise},this.viewResourceDetail=function(e,t){if(t=!angular.isDefined(t)||null==t||t?!0:!1,r.authenticated&&"XXXXXXXXX"===e.downloadPassword)return void showMessage("会话异常","非常抱歉，我们检测到会话异常，请刷新页面。");if(n.setCurrentResource(e),!angular.isDefined(e.likeInd)){e.likeInd="N",e.bookmarkInd="N",e.downloadInd="N";var o=a.loadAllFlagByUser(e.id);o.then(function(t){var r=t.flags;if(r&&r.length>0)for(var o=0;o<r.length;o++)"L"==r[o].flagType?e.likeInd="Y":"B"==r[o].flagType?e.bookmarkInd="Y":"D"==r[o].flagType&&(e.downloadInd="Y")})}if(t){var s=$(window).width();768>s?window.open("resource/"+e.id):($(".dialog.resource article").removeClass("translate-left"),$(".dialog.resource article").removeClass("translate-right"),$(".dialog.resource article").removeClass("translate-left2"),$(".dialog.resource article").removeClass("translate-right2"),showDialog(".dialog.resource"))}var l={refId:e.id};i.updateStatistics(l)},this.viewResourceUpdate=function(e){n.setCurrentResource(e),r.authenticated?showDialog(".dialog.resource-add"):(r.registerInd=!1,showDialog(".dialog.register-and-login"))},this.viewResourceAdd=function(e){n.setCurrentResource({category:null,subCategory:null,title:null,type:e}),r.authenticated?showDialog(".dialog.resource-add"):(r.registerInd=!1,showDialog(".dialog.register-and-login"))}}]),services.factory("ResourceView",["$rootScope","$cookieStore",function(e,t){return this.isCurrentResourceSetted=function(){return null===e.currentResource},this.resetCurrentResource=function(){e.currentResource=null},this.setCurrentResource=function(t){e.currentResource=t},this.getCurrentResource=function(){return e.currentResource},this}]),services.factory("ResourceCategory",["$rootScope","$cookieStore",function(e,t){return this.categories=[{name:"ALL",title:"全部",resourceType:"R"},{name:"DESIGN",title:"设计",resourceType:"R",subCategories:[{name:"ALL",title:"全部"},{name:"COLOR",title:"色彩"},{name:"TYPE",title:"字体"},{name:"ICON",title:"图标"},{name:"ANIMATION",title:"动效"},{name:"IMAGE",title:"图片"},{name:"INSPIRATION",title:"灵感"},{name:"UI_KIT",title:"UI KIT"},{name:"WEB_TEMPLATE",title:"模板"},{name:"TUTORIAL",title:"教程"},{name:"BOOK",title:"书籍"}]},{name:"DEVELOPMENT",title:"开发",resourceType:"R",subCategories:[{name:"ALL",title:"全部"},{name:"FRONTEND",title:"前端"},{name:"BACKEND",title:"后端"},{name:"DATABASE",title:"数据库"},{name:"ARCHITECHTURE",title:"架构"},{name:"SECURITY",title:"安全"},{name:"CLOUD",title:"云计算"},{name:"BIG_DATA",title:"大数据"},{name:"AI",title:"机器学习"},{name:"READING",title:"阅读"}]},{name:"MOBILE",title:"移动",resourceType:"R",subCategories:[{name:"ALL",title:"全部"},{name:"IOS",title:"iOS"},{name:"ANDROID",title:"Android"},{name:"HYBRID",title:"Hybrid"},{name:"TUTORIAL",title:"教程"},{name:"BOOK",title:"书籍"}]},{name:"TOOLS",title:"工具",resourceType:"R",subCategories:[{name:"ALL",title:"全部"},{name:"DEV_TOOLS",title:"开发工具"},{name:"DESIGN_TOOLS",title:"设计工具"},{name:"PRODUCTIVITY_TOOLS",title:"效率工具"}]},{name:"CRAFT",title:"作品",resourceType:"C",subCategories:[{name:"ALL",title:"全部"},{name:"DESIGN",title:"设计"},{name:"WEBSITE",title:"网站"},{name:"APP",title:"APP"},{name:"CREATIVITY",title:"创意"},{name:"PROGRAM",title:"小程序"},{name:"TOOL",title:"工具"},{name:"OTHERS",title:"其他"}]}],this.getCategories=function(){return this.categories},this.getSubCategoriesByCategoryName=function(e){for(var t=0;t<this.categories.length;t++)if(this.categories[t].name==e)return this.categories[t].subCategories;return null},this.getCategoryTitle=function(e){for(var t=0;t<this.categories.length;t++)if(this.categories[t].name==e)return this.categories[t].title;return""},this.getSubCategoryTitle=function(e){for(var t=0;t<this.categories.length;t++){var r=this.categories[t].subCategories;if(angular.isDefined(r))for(var o=0;o<r.length;o++)if(r[o].name==e)return r[o].title}return""},this}]),services.service("RankService",["$http","$q","$global",function(e,t,r){this.loadAllRank=function(o){o.isLoading=!0;var n=t.defer(),a=r.preparePath("/rank/"+o.yearWeekInd+"/"+o.pageNo);return e({method:"GET",url:a}).success(function(e,t,r,a){o.isLoading=!1,n.resolve(e)}).error(function(e,t,n,a){o.isLoading=!1,r.handleErrors(t)}),n.promise}}]),services.service("StatisticsService",["$http","$q","$global",function(e,t,r){this.updateStatistics=function(o){var n=t.defer(),a=r.preparePath("/statistics/view");return e({method:"POST",url:a,data:o}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,o,n){r.handleErrors(t)}),n.promise}}]),services.service("FlagService",["$http","$q","$global",function(e,t,r){this.addFlag=function(o){var n=t.defer(),a=r.preparePath("/flag");return e({method:"POST",url:a,data:o}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,o,n){r.handleErrors(t)}),n.promise},this.removeFlag=function(o){var n=t.defer(),a=r.preparePath("/flag/"+o.flagType+"/"+o.refId);return e({method:"DELETE",url:a}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,o,n){r.handleErrors(t)}),n.promise},this.loadAllFlagByUser=function(o){var n=t.defer(),a=r.preparePath("/flag/"+o);return e({method:"GET",url:a}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,o,n){r.handleErrors(t)}),n.promise}}]),services.service("CommentService",["$http","$q","$global",function(e,t,r){this.addComment=function(o){var n=t.defer(),a=r.preparePath("/comment");return e({method:"POST",url:a,data:o}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,o,n){r.handleErrors(t)}),n.promise},this.removeComment=function(o){var n=t.defer(),a=r.preparePath("/comment/"+o.refId);return e({method:"DELETE",url:a}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,o,n){r.handleErrors(t)}),n.promise},this.loadAllCommentByRefId=function(o){var n=t.defer(),a=r.preparePath("/comment/"+o);return e({method:"GET",url:a}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,o,n){r.handleErrors(t)}),n.promise}}]),services.service("FeedbackService",["$http","$q","$global",function(e,t,r){this.addFeedback=function(o){var n=t.defer(),a=r.preparePath("/feedback");return e({method:"POST",url:a,data:o}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,o,n){r.handleErrors(t)}),n.promise}}]),services.service("ProfileService",["$http","$q","$global",function(e,t,r){this.loadAllContributorProfile=function(o){var n=t.defer(),a=r.preparePath("/contributor/"+o.pageNo);return e({method:"GET",url:a}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,o,n){r.handleErrors(t)}),n.promise},this.loadProfileByUserId=function(o){var n=t.defer(),a=r.preparePath("/profile/"+o);return e({method:"GET",url:a}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,o,n){r.handleErrors(t)}),n.promise},this.updateProfile=function(o){var n=t.defer(),a=r.preparePath("/profile");return e({method:"PUT",url:a,data:o}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,o,n){r.handleErrors(t)}),n.promise}}]),services.service("UserService",["$rootScope","$http","$q","$resource","$location","$cookieStore","$base64","$global",function(e,t,r,o,n,a,i,s){this.api=o("http://localhost:8080/user/:userId"),this.currentUserUrl=s.getAPIUrl()+"/currentuser",this.logOutUrl=s.getAPIUrl()+"/logout";var l=this;this.currentUser=function(){var o=r.defer();return t.get(this.currentUserUrl).success(function(t){t.userName?(e.theUser=t,e.authenticated=!0,o.resolve(!0)):(e.authenticated=!1,o.resolve(!1))}).error(function(t,r,n,a){e.authenticated=!1,o.resolve(!1)}),o.promise},this.authenticateByToken=function(r){var o=s.getStorage("tokenKey"),n=s.getStorage("authToken"),a=!1,i={username:o,password:o};angular.isDefined(n)&&null!=n?t.get(this.currentUserUrl).success(function(t,n,c,u){if(t.userName)a=!0,e.authenticated=!0,e.theUser=t;else if(a=!1,e.authenticated=!1,s.removeStorage("authToken"),0==a&&angular.isDefined(o)&&null!=o)return void l.authenticate(i,r);r&&r(t)}).error(function(t,n,c,u){a=!1,e.authenticated=!1,s.removeStorage("authToken"),0==a&&angular.isDefined(o)&&l.authenticate(i,r)}):0==a&&angular.isDefined(o)&&null!=o?l.authenticate(i,r):r&&r()},this.authenticate=function(o,n){s.removeStorage("authToken"),s.removeStorage("tokenKey");var a=r.defer(),l=o?{authorization:"Basic "+i.encode(o.username+":"+o.password)}:{};t.get(this.currentUserUrl,{headers:l}).success(function(t,r,a,i){t.userName?(e.authenticated=!0,e.theUser=t,s.setStorage("authToken",a("x-auth-token")),s.setStorage("tokenKey",o.username),closeDialog()):(e.authenticated=!1,s.removeStorage("authToken"),s.removeStorage("tokenKey")),n&&n(t)}).error(function(t,r,o,a){s.handleErrors(r),s.removeStorage("authToken"),s.removeStorage("tokenKey"),e.authenticated=!1,n&&n()})},this.oAuthCallback=function(e){var o=r.defer(),n=s.preparePath("/oauth/"+e.type+"/callback?code="+e.code);return t({method:"GET",url:n}).success(function(e,t,r,n){s.setStorage("authToken",r("x-auth-token")),o.resolve(e)}).error(function(e,t,r,o){s.handleErrors(t)}),o.promise},this.logout=function(){t.post(this.logOutUrl,{}).success(function(t){e.authenticated=!1,e.theUser=void 0,s.removeStorage("authToken"),s.removeStorage("tokenKey"),n.path("/"),showMessage("您已成功登出。","感谢您对技匠社的支持！")}).error(function(t,r,o,n){s.handleErrors(r),e.authenticated=!1})}}]);var userManager=angular.module("techmaskApp.userManager",["ngResource","ngCookies","base64","techmaskApp.services"]);userManager.controller("OAuthCallbackCtrl",["$rootScope","$scope","$routeParams","$location","$global","UserService",function(e,t,r,o,n,a){t.oAuthCallback=function(){$(".main-menu-wrap").hide();var e={type:r.authType,code:url("?code")};t.authType=e.type.toUpperCase();var o=a.oAuthCallback(e);o.then(function(e){var t=e.tokenKey,r=window,o=window;r.opener&&null!=r.opener&&r.opener!=r&&(o=r.opener),o.location=n.getAppPath()+"/login/"+t,self.close()})},t.oAuthCallback()}]),angular.module("techmaskApp").controller("MainCtrl",["$rootScope","$scope","$http","$routeParams","$location","UserService",function(e,t,r,o,n,a){t.blogs=[{title:"自学设计，你真的入门了吗？",likes:963,reads:15801,desc:"通过技匠自身的实践和感悟，告诉读者如何以正确的方式自学设计，并进一步去认识设计的本质。",img:"http://static.jijiangshe.com/img/blogs/1.jpg",href:"http://www.jianshu.com/p/744fb80e7d72"},{title:"iOS开发完全自学资源集合",likes:759,reads:15716,desc:"如果你有一个很好的想法，为什么不自己动手做一个App来实现它呢。通过以下这些精心挑选的教程和资源，你也能作出属于自己的iOS App来。",img:"http://static.jijiangshe.com/img/blogs/2.jpg",href:"http://www.jianshu.com/p/d70041eb25d7"},{title:"每个程序员都应该了解的一件事",likes:329,reads:6915,desc:"程序员是否仅仅通过出色的技术能力就能获得成功呢？看看技匠从那些IT高管和行业技术大牛那里获得的启发。",img:"http://static.jijiangshe.com/img/blogs/3.jpg",href:"http://www.jianshu.com/p/68fa0bca10f9"},{title:"如何成为一名优秀的全栈工程师",likes:316,reads:12614,desc:"全栈工程师是目前最热门职位，技匠带你全面认识全栈工程师的价值以及成为优秀全栈工程师所需具备的关键技能和附加技能。",img:"http://static.jijiangshe.com/img/blogs/4.jpg",href:"http://www.jianshu.com/p/f0d134ed7fd0"}],t.testimonials=[{comment:"技匠的文章涉猎非常广，从设计师到程序员，而且每一篇文章都值得细读，我几乎每周都会关注他的心文章。",name:"杨昕霖",title:"产品设计师@稀土掘金",img:"http://static.jijiangshe.com/img/testimonials/1.jpg"},{comment:"看得出技匠社里的那些资源都是精心挑选的，我非常喜欢，并期待能在这里看到更多优秀的资源。",name:"Ella Wang",title:"UI设计师@Freelancer",img:"http://static.jijiangshe.com/img/testimonials/2.png"},{comment:"我们对技匠的文章很感兴趣，希望他早日能将这些优秀文章写成一本书，让更多年轻朋友们能够读到。",name:"魏江江（网名：老猫一个）",title:"图书事业部主任@清华大学出版社",img:"http://static.jijiangshe.com/img/testimonials/3.jpg"},{comment:"我很喜欢技匠写的【设计谈】系列文章，虽然都很基础，但对我这样的初学者正确地理解以及学习设计非常有帮助。",name:"梁超",title:"高级运营@七牛科技",img:"http://static.jijiangshe.com/img/testimonials/4.jpg"},{comment:"技匠的一些关于程序员的文章，比如《给年轻程序员的10点启示》等等，给了我很多启发，可以让我避免走很多弯路。",name:"颜宏",title:"Application Developer@IBM",img:"http://static.jijiangshe.com/img/testimonials/5.jpg"},{comment:"我参与了技匠社的开发，跟着匠叔一起开发，学到了很多东西，这让我对技术更有兴趣也更有信心了。",name:"吴绍康",title:"开发工程师@平安银行研发部",img:"http://static.jijiangshe.com/img/testimonials/6.jpg"}],t.register=function(){showDialog(".dialog.register")},t.login=function(){var t={username:o.token,password:o.token};a.authenticate(t,function(){e.authenticated&&(e.isAuthenticating=!1,showMessage("登录成功",e.theUser.userName+"，欢迎来到技匠社！"))})},1==n.path().indexOf("login")&&t.login()}]);var feedbackManager=angular.module("techmaskApp.feedbackManager",["ngResource","ngCookies","base64","techmaskApp.services"]);feedbackManager.controller("FeedbackCtrl",["$rootScope","$scope","$http","$routeParams","$location","FeedbackService",function(e,t,r,o,n,a){t.newFeedback={},t.addFeedback=function(e){var r=e.$valid;if(r){var o=a.addFeedback(t.newFeedback);o.then(function(r){t.handleValidationError(r)&&(showMessage("您的消息提交成功了","我们将尽快进行处理您的反馈，感谢您对技匠社的支持！"),t.newFeedback={},e.$setPristine(!0))})}},t.handleValidationError=function(e){var t=!0;return"VALIDATION_FAILED"==e._resultCode&&(e._errMsg.indexOf("error.feedback.exceedAddLimit")>=0&&showMessage("对不起，无法提交反馈","您今天提交的反馈正在处理中，请勿重复提交。您也可以发送邮件到jijiang@techmask提交您的反馈。"),t=!1),"SUCCESS"!=e._resultCode&&(t=!1),t}}]);var resourceManager=angular.module("techmaskApp.resourceManager",["ngResource","ngCookies","base64","techmaskApp.services"]);resourceManager.controller("ResourceDetailCtrl",["$rootScope","$scope","$routeParams","ResourceService","ResourceView","ResourceCategory","FlagService","CommentService",function(e,t,r,o,n,a,i,s){if(t.resourceId=null,t.commentOptions={showComments:!1,loadingInd:!1},t.donation={showDonate:!1,isZhifubao:!0,title:"支付宝打赏任意金额",switchTitle:"微信支付"},t.comments=[],t.newComment={},angular.isDefined(r.resourceId)&&null!=r.resourceId&&(t.resourceId=r.resourceId),null!=t.resourceId){var l=o.loadResourceDetail(t.resourceId);l.then(function(e){null!=e.resource?(o.viewResourceDetail(e.resource,!1),null==t.resourceId,t.showComments()):showMessage("资源未找到","抱歉，您要找的资源不存在。")})}t.swithDonationMethod=function(){1==t.donation.isZhifubao?(t.donation.isZhifubao=!1,t.donation.title="微信打赏10元",t.donation.switchTitle="支付宝支付"):(t.donation.isZhifubao=!0,t.donation.title="支付宝打赏任意金额",t.donation.switchTitle="微信支付")},t.showDonate=function(){t.donation.showDonate=!0;var e="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";
$(".dialog.resource article").addClass("translate-left").one(e,function(){})},t.hideDonate=function(){t.donation.showDonate=!1;var e="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";$(".dialog.resource article").addClass("translate-right").one(e,function(){$(this).removeClass("translate-left"),$(this).removeClass("translate-right")})},t.showComments=function(){var e=n.getCurrentResource();if(t.comments.length!=e.commentCount){var r=s.loadAllCommentByRefId(e.id);r.then(function(e){t.comments=e.comments})}t.commentOptions.showComments=!0,t.newComment={comment:null,ratingScore:0,rating:0};var o="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";$(".dialog.resource article").addClass("translate-right2").one(o,function(){})},t.hideComments=function(){t.commentOptions.showComments=!1;var e="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";$(".dialog.resource article").addClass("translate-left2").one(e,function(){$(this).removeClass("translate-left2"),$(this).removeClass("translate-right2")})},t.getCommentById=function(e){for(var r=null,o=t.comments,n=0;n<o.length;n++)if(o[n].id==e){r=o[n];break}return r},t.addComment=function(r){if(!e.authenticated)return void showMessage("无法进行此操作","您还没有登录。");var o=n.getCurrentResource();t.newComment.refId=o.id;var a=r.$valid;if(a&&!t.commentOptions.loadingInd){t.commentOptions.loadingInd=!0,showLoading();var i=s.addComment(t.newComment);i.then(function(e){r.$setPristine(!0);var n=e.comment;if(angular.isDefined(n.parentId)&&null!=n.parentId){var a=t.getCommentById(n.parentId);null==a.childComments&&(a.childComments=[]),a.childComments.push(n)}else t.comments.unshift(e.comment);t.newComment={comment:null,rating:0,ratingScore:0},o.commentCount++,hideLoading(),t.commentOptions.loadingInd=!1})}},t.replyComment=function(e){angular.isDefined(e.parentId)&&null!=e.parentId?t.newComment.parentId=e.parentId:t.newComment.parentId=e.id,t.newComment.comment="@"+e.ownerName+": ",$(".comment-form .desc").focus()},t.downloadResource=function(){var r=n.getCurrentResource();e.authenticated&&t.flagResource("D"),window.open(r.downloadUrl)},t.flagResource=function(t){if(!e.authenticated)return void showMessage("无法进行此操作","您还没有登录。");var r=n.getCurrentResource(),o={refId:r.id,flagType:t};if("L"==t){if("N"==r.likeInd){r.likeInd="Y",r.likeCount++;var a=i.addFlag(o);a.then(function(e){})}else if("Y"==r.likeInd){r.likeInd="N",r.likeCount--;var a=i.removeFlag(o);a.then(function(e){})}}else if("B"==t){if("N"==r.bookmarkInd){r.bookmarkInd="Y",r.bookmarkCount++;var a=i.addFlag(o);a.then(function(e){})}else if("Y"==r.bookmarkInd){r.bookmarkInd="N",r.bookmarkCount--;var a=i.removeFlag(o);a.then(function(e){})}}else if("D"==t&&"N"==r.downloadInd){r.downloadInd="Y",r.downloadCount++;var a=i.addFlag(o);a.then(function(e){})}}}]),resourceManager.controller("ResourceCtrl",["$rootScope","$scope","$location","$routeParams","$global","ResourceService","ResourceView","ResourceCategory","FlagService",function(e,t,r,o,n,a,i,s,l){t.resources=[],t.initializing=!0,t.currentMode=null,t.showEmptyMsg=!1,t.rssItems=[{href:"http://rss.jijiangshe.com/resources.xml",title:"全部"},{href:"http://rss.jijiangshe.com/design-resources.xml",title:"设计"},{href:"http://rss.jijiangshe.com/development-resources.xml",title:"开发"},{href:"http://rss.jijiangshe.com/mobile-resources.xml",title:"移动"},{href:"http://rss.jijiangshe.com/tools-resources.xml",title:"工具"}],t.orderIndOptions=[{name:"LATEST",title:"最新收录"},{name:"RATING",title:"最高评分"},{name:"POPULAR",title:"最多浏览"},{name:"DOWNLOAD",title:"最多下载"}],t.resourceIndOptions=[{name:"ALL",title:"所有类型"},{name:"RECOMMEND",title:"资源推荐"},{name:"DOWNLOAD",title:"网盘资源"}],t.periodIndOptions=[{name:"ALL",title:"所有时间"},{name:"WEEK",title:"最近一周"},{name:"MONTH",title:"最近一月"}],t.resourceFilter={category:"ALL",subCategory:"ALL",type:"R",pageNo:1,disabled:!1,orderInd:"LATEST",resourceInd:"ALL",periodInd:"ALL",isLoading:!1},angular.isDefined(o.category)&&null!=o.category&&(t.resourceFilter.category=o.category.toUpperCase()),angular.isDefined(o.subCategory)&&null!=o.subCategory&&(t.resourceFilter.subCategory=o.subCategory.toUpperCase()),t.categories=s.getCategories(),t.subCategories=null,0==r.path().indexOf("/crafts")&&(t.resourceFilter.type="C",t.resourceFilter.category="CRAFT"),t.keyChanged=function(e){13==e.keyCode&&t.loadAllResourceByKeywords()},t.viewResourceDetail=function(e){t.currentMode="VIEW",a.viewResourceDetail(e)},t.viewResourceAdd=function(){t.currentMode="ADD",a.viewResourceAdd(t.resourceFilter.type)},t.viewResourceUpdate=function(e){t.currentMode="UPDATE",a.viewResourceUpdate(e)},t.loadNextResourcePage=function(){if(0==t.initializing){t.resourceFilter.pageNo++,t.resourceFilter.disabled=!0;var e=a.loadAllResource(t.resourceFilter);e.then(function(e){null!=e.resources&&e.resources.length>0&&(t.resources=t.resources.concat(e.resources),e.resources.length==n.getPageSize()&&(t.resourceFilter.disabled=!1))})}},t.loadAllResource=function(){t.subCategories=s.getSubCategoriesByCategoryName(t.resourceFilter.category),t.resourceFilter.disabled=!0;var e=a.loadAllResource(t.resourceFilter);e.then(function(e){t.postLoadAllResource(e)})},t.loadAllResourceByKeywords=function(){t.resourceFilter.category="ALL",t.resourceFilter.subCategory="ALL",t.resourceFilter.pageNo=1,t.resourceFilter.disabled=!0;var e=a.loadAllResource(t.resourceFilter);e.then(function(e){t.postLoadAllResource(e)})},t.loadAllResourceByCategory=function(e,r){t.resourceFilter.category=e,t.resourceFilter.subCategory=r,t.resourceFilter.pageNo=1,t.subCategories=s.getSubCategoriesByCategoryName(e),t.resourceFilter.disabled=!0;var o=a.loadAllResource(t.resourceFilter);o.then(function(e){t.postLoadAllResource(e)})},t.postLoadAllResource=function(e){t.resources=e.resources,null==t.resources||0==t.resources.length?t.showEmptyMsg=!0:t.showEmptyMsg=!1,t.initializing=!1,e.resources.length==n.getPageSize()&&(t.resourceFilter.disabled=!1)},t.$watch(function(){return e.currentResource},function(){if("ADD"==t.currentMode&&angular.isDefined(e.currentResource.id)&&null!=e.currentResource.id&&("ALL"==t.resourceFilter.category||e.currentResource.category==t.resourceFilter.category)&&("ALL"==t.resourceFilter.subCategory||e.currentResource.subCategory==t.resourceFilter.subCategory)){var r=a.loadResourceDetail(e.currentResource.id);r.then(function(e){null!=e.resource&&(t.resources.unshift(e.resource),t.showEmptyMsg=!1)})}},!0),t.$watch(function(){return t.resourceFilter.orderInd},function(){t.initializing||(t.resourceFilter.pageNo=1,t.loadAllResource())},!0),t.$watch(function(){return t.resourceFilter.resourceInd},function(){t.initializing||(t.resourceFilter.pageNo=1,t.loadAllResource())},!0),t.$watch(function(){return t.resourceFilter.periodInd},function(){t.initializing||(t.resourceFilter.pageNo=1,t.loadAllResource())},!0),e.isAuthenticating?t.$watch(function(){return e.isAuthenticating},function(){e.isAuthenticating===!1&&t.loadAllResource()},!0):t.loadAllResource()}]),resourceManager.controller("ResourceAddCtrl",["$rootScope","$scope","$global","ResourceService","ResourceView","ResourceCategory",function(e,t,r,o,n,a){var i="/companymanager/maintainCompany.do?processCode=uploadFile";t.obj={},t.newResource={},t.flowOptions={singleFile:!0,testChunks:!1},t.resourceFieldTitles={pageTitle:"分享或推荐优秀资源",title:"资源标题",desc:"请用心写下你的资源推荐原因",origUrl:"资源介绍地址：http://"},t.craftFieldTitles={pageTitle:"推荐我的作品",title:"作品标题（请确保这是你的原创作品）",desc:"快来给大家讲讲你的匠心之作",origUrl:"作品介绍地址：http://"},t.fieldTitles=null,t.$watch(function(){return e.currentResource},function(){t.newResource!=n.getCurrentResource()&&(t.newResource=n.getCurrentResource(),t.onResouceTypeChange(),null!=t.$$childHead&&(t.$$childHead.resourceForm.$setPristine(!0),t.obj.flow.cancel()))},!0),t.addOrUpdateResource=function(e){var a=e.$valid&&null!=t.newResource.category&&null!=t.newResource.subCategory&&(t.obj.flow.files.length>0||null!=t.newResource.id);if(a&&t.obj.flow.getSize()>1048576&&($("form.resource-form .submit-btn").animateCss("buttonshake"),showMessage("无法上传图片","图片大小超过1M，请修改或重新选择图片。"),a=!1),a){showLoading();var i=null;i=null!=t.newResource.id?o.updateResource(t.newResource):o.addResource(t.newResource),i.then(function(o){t.handleValidationError(o)&&(t.obj.flow.getSize()>0?(t.obj.flow.opts.target=r.preparePath("/resource/imageupload/"+o.resource.id),t.obj.flow.opts.headers={"X-Auth-Token":r.getStorage("authToken")},t.obj.flow.upload(),t.obj.flow.on("fileSuccess",function(r,a){hideLoading(),n.getCurrentResource().id=o.resource.id,t.obj.flow.cancel();var i=o.resource.remainAddCount;i>0?(closeDialog(),showMessage("添加资源成功","您今天还可以添加"+i+"个资源。"),t.newResource={},e.$setPristine(!0)):0==i?(closeDialog(),showMessage("添加资源成功","您今天已达到资源添加上限，感谢您对技匠社的支持！"),t.newResource={},e.$setPristine(!0)):(closeDialog(),t.newResource={},showMessage("资源更新成功","您已完成资源更新！"))}),t.obj.flow.on("fileError",function(e,t){hideLoading(),showMessage("资源图片上传失败","资源已添加，但图片未能上传成功。")})):(hideLoading(),closeDialog(),showMessage("资源更新成功","您已完成资源更新！")))})}else $("form.resource-form .submit-btn").animateCss("buttonshake")},t.handleValidationError=function(e){var t=!0;return"VALIDATION_FAILED"==e._resultCode&&(hideLoading(),e._errMsg.indexOf("error.resouce.exceedAddLimit")>=0?showMessage("对不起，无法添加此资源","您今天已达到资源添加上限，无法继续添加资源。"):e._errMsg.indexOf("error.resouce.sameOrigUrl")>=0?showMessage("对不起，无法添加此资源","相同的资源已存在，无法添加重复资源。"):e._errMsg.indexOf("error.resource.notOwnResource")>=0&&showMessage("对不起，无法更新此资源","您没有权限更新此资源，请检查此资源是否为本人发布。"),$("form.resource-form .submit-btn").animateCss("buttonshake"),t=!1),"SUCCESS"!=e._resultCode&&(t=!1),t},t.onResouceTypeChange=function(){!angular.isDefined(t.newResource)||angular.isDefined(t.newResource.id)&&null!=t.newResource.id||("C"==t.newResource.type?(t.fieldTitles=t.craftFieldTitles,t.newResource.category="CRAFT",t.newResource.subCategory=null):(t.fieldTitles=t.resourceFieldTitles,t.newResource.category=null,t.newResource.subCategory=null))},t.onResouceTypeChange()}]),resourceManager.directive("categoryLabel",["ResourceCategory",function(e){return{scope:{category:"@"},transclude:!0,restrict:"E",replace:!0,template:"<span>{{categoryTitle}}</span>",link:function(t,r,o){t.$watch("category",function(){t.categoryTitle=e.getCategoryTitle(t.category)},!0)}}}]),resourceManager.directive("categorySelect",["ResourceCategory",function(e){return{scope:{categoryModel:"=",resourceType:"="},transclude:!0,restrict:"E",replace:!0,template:'<div ng-hide="resourceType==\'C\'" class="category-select" ng-class="{true:\'ng-invalid\'}[invalid]"><span ng-repeat="category in categories | filter:{resourceType:resourceType}" ng-hide="category.name==\'ALL\'" ng-class="{true:\'active\'}[category.name==categoryModel]" ng-click="selectCategory(category)">{{category.title}}</span></div>',link:function(t,r,o){t.dirty=!1,t.invalid=!0,t.categories=e.getCategories(),t.$watch("categoryModel",function(){null!=t.categoryModel&&(t.dirty=!0,t.invalid=!1)},!0),t.selectCategory=function(e){t.categoryModel=e.name,t.dirty=!0,t.invalid=!1}}}}]),resourceManager.directive("subCategorySelect",["ResourceCategory",function(e){return{scope:{categoryModel:"=",subCategoryModel:"="},transclude:!0,restrict:"E",replace:!0,template:'<div class="sub-category-select" ng-class="{true:\'ng-invalid\'}[invalid]" ng-show="subCategories!=null&&subCategories.length>0"><span ng-repeat="subCategory in subCategories" ng-hide="subCategory.name==\'ALL\'" ng-class="{true:\'active\'}[subCategory.name==subCategoryModel]" ng-click="selectSubCategory(subCategory)">{{subCategory.title}}</span></div>',link:function(t,r,o){t.dirty=!1,t.invalid=!0,t.$watch("categoryModel",function(){t.subCategories=e.getSubCategoriesByCategoryName(t.categoryModel)},!0),t.$watch("subCategoryModel",function(){null!=t.subCategoryModel&&(t.dirty=!0,t.invalid=!1)},!0),t.selectSubCategory=function(e){t.subCategoryModel=e.name,t.dirty=!0,t.invalid=!1}}}}]),resourceManager.directive("subcategoryLabel",["ResourceCategory",function(e){return{scope:{subcategory:"@"},transclude:!0,restrict:"E",replace:!0,template:"<span>{{subCategoryTitle}}</span>",link:function(t,r,o){t.$watch("subcategory",function(){t.subCategoryTitle=e.getSubCategoryTitle(t.subcategory)},!0)}}}]);var faqManager=angular.module("techmaskApp.faqManager",["ngResource","ngCookies","base64","techmaskApp.services"]);faqManager.controller("FaqCtrl",["$rootScope","$scope","$http","$routeParams","$location",function(e,t,r,o,n){t.postList=[{title:"为什么你应该让你的孩子尽早学习编程",img:"img/post-list/1.jpg",href:"http://www.jianshu.com/p/ed652a06eb4b",date:"08 May"},{title:"10个值得前端收藏的CSS3动效库（工具）",img:"img/post-list/2.jpg",href:"http://www.jianshu.com/p/31118d83cb5f",date:"30 Apr"},{title:"知道这20个正则表达式，能让你少写1,000行代码",img:"img/post-list/3.jpg",href:"http://www.jianshu.com/p/e7bb97218946",date:"21 Apr"}],t.articleCollections=[{title:"观点",href:"http://www.jianshu.com/notebooks/3337086/latest"},{title:"教程",href:"http://www.jianshu.com/notebooks/3638160/latest"},{title:"工具资源",href:"http://www.jianshu.com/notebooks/3655293/latest"},{title:"程序员",href:"http://www.jianshu.com/notebooks/3235992/latest"},{title:"设计师",href:"http://www.jianshu.com/notebooks/2855566/latest"},{title:"图说",href:"http://www.jianshu.com/notebooks/3689484/latest"},{title:"好奇心",href:"http://www.jianshu.com/notebooks/3953984/latest"}],t.faqs=[{type:"ABOUT",question:"技匠是誰",answer:"技匠目前是一家世界500强企业的IT Solution Delivery Manager，工作时间他是一名IT管理者，而业余时间他是一名全栈工程师，做着自己喜欢的开源项目。同时他也喜欢通过写作分享自己关于开发与设计的理解和心得，他也是简书的签约作者以及稀土掘金的联合编辑。"},{type:"ABOUT",question:"为什么创建技匠社",answer:"技匠希望能够汇聚更多像他一样有一颗匠心，希望通过不断实践提高自身技术能力的年轻朋友们。通过成立技匠社把大家聚集在一起，并通过互相之间的交流分享，使每一个人都能更有效地学习并获得提高。"},{type:"ABOUT",question:"技匠社提供什么",answer:"技匠社由 技匠社网站，技术博客，微信订阅号组成，技匠社是一个成长中的平台，由技匠社的几位创始会员一起搭建完成，目前提供资源分享服务，我们会根据技匠社成员们的需求不断完善网站，并提供更多贴近程序员或设计师的服务。技术博客是技匠在简书上的技术博客，每周都会提供一到两篇原创技术文章。而在微信订阅号中，你可以收到最新的文章以及技匠社资源等各方面的最新咨询"},{type:"SYSTEM",question:"关于登陆",answer:"技匠社暂不提供直接注册的方式登陆，都是通过第三方登录，目前我们为大家提供了微信、QQ、微博、GitHub四种登陆方式。"},{type:"SYSTEM",question:"关于资源",answer:"技匠社的资源都是技匠人平时收集整理所得，目前都是免费向大家开放的。大家成功登陆以后，便可以看到资源的获取方式了。如果你有不错的资源，也欢迎分享给技匠。联系我们。"}],t.blogs=[{title:"自学设计，你真的入门了吗？",author:"技匠",reads:15044,desc:"通过技匠自身的实践和感悟，告诉读者如何以正确的方式自学设计，并进一步去认识设计的本质。",img:"img/blogs/1.jpg",href:"http://www.jianshu.com/p/744fb80e7d72"},{title:"iOS开发完全自学资源集合",author:"技匠",reads:12344,desc:"如果你有一个很好的想法，为什么不自己动手做一个App来实现它呢。通过以下这些精心挑选的教程和资源，你也能作出属于自己的iOS App来。",img:"img/blogs/2.jpg",href:"http://www.jianshu.com/p/d70041eb25d7"},{title:"每个程序员都应该了解的一件事",author:"技匠",reads:6242,desc:"程序员是否仅仅通过出色的技术能力就能获得成功呢？看看技匠从那些IT高管和行业技术大牛那里获得的启发。",img:"img/blogs/3.jpg",href:"http://www.jianshu.com/p/68fa0bca10f9"},{title:"如何成为一名优秀的全栈工程师",author:"技匠",reads:11690,desc:"全栈工程师是目前最热门职位，技匠带你全面认识全栈工程师的价值以及成为优秀全栈工程师所需具备的关键技能和附加技能。",img:"img/blogs/4.jpg",href:"http://www.jianshu.com/p/f0d134ed7fd0"}],t.testimonials=[{comment:"技匠社里的设计资源都很新，而且分类也非常合理，省去了我很多寻找素材时间，谢谢技匠～",name:"吴晓新",title:"平安科技 UI设计师",img:"img/testimonials/1.png"},{comment:"技匠社里的开发教程都很棒，而且这些教程都很简明，很适合我们由浅入深地学习，我非常喜欢～",name:"陈群",title:"大群科技 UI设计师",img:"img/testimonials/2.png"},{comment:"技匠社里的设计资源都很新，而且分类也非常合理，省去了我很多寻找素材时间，谢谢技匠～",name:"吴晓新",title:"平安科技 UI设计师",img:"img/testimonials/3.png"},{comment:"技匠社里的开发教程都很棒，而且这些教程都很简明，很适合我们由浅入深地学习，我非常喜欢～",name:"陈群",title:"大群科技 UI设计师",img:"img/testimonials/4.png"},{comment:"技匠社里的设计资源都很新，而且分类也非常合理，省去了我很多寻找素材时间，谢谢技匠～",name:"吴晓新",title:"平安科技 UI设计师",img:"img/testimonials/5.png"},{comment:"技匠社里的开发教程都很棒，而且这些教程都很简明，很适合我们由浅入深地学习，我非常喜欢～",name:"陈群",title:"大群科技 UI设计师",img:"img/testimonials/6.png"}]}]);var flagManager=angular.module("techmaskApp.flagManager",["ngResource","ngCookies","base64","techmaskApp.services"]),profileManager=angular.module("techmaskApp.profileManager",["ngAnimate","ngResource","ngCookies","base64","techmaskApp.services","techmaskApp.accountManager"]);profileManager.controller("ContributorCtrl",["$rootScope","$scope","$routeParams","ResourceService","ResourceView","ResourceCategory","FlagService",function(e,t,r,o,n,a,i){t.profiles=[],t.profileFilter={pageNo:1,disabled:!1},t.loadAllContributorProfile=function(){var e=ProfileService.loadAllContributorProfile(t.profileFilter);e.then(function(e){t.profiles=e.profiles})},t.loadNextContributorProfilePage=function(){t.profileFilter.pageNo++,t.profileFilter.disabled=!0;var e=ProfileService.loadAllContributorProfile(t.profileFilter);e.then(function(e){null!=e.profiles&&e.profiles.length>0&&(t.profileFilter.disabled=!1,t.profiles=t.profiles.concat(e.profiles))})},t.loadAllContributorProfile()}]),profileManager.controller("UserProfileCtrl",["$rootScope","$scope","$routeParams","$global","ResourceService","AccountService","ProfileService",function(e,t,r,o,n,a,i){t.profile={},t.paymentRequest={applyAmount:50,email:null,accountInfo:null},t.isEditingProfile=!1,t.isEditingPaymentRequest=!1,t.userId=r.userId,t.resources=[],t.resourceFilter={},t.filterTypes=[{title:"分享的资源",name:"ownResource"},{title:"发布的作品",name:"ownCraft"},{title:"喜欢的资源",name:"L"},{title:"收藏的资源",name:"B"},{title:"下载的资源",name:"D"}],t.loadProfileByUserId=function(){var e=i.loadProfileByUserId(t.userId);e.then(function(e){t.profile=e.profile,t.paymentRequest.email=t.profile.email,t.paymentRequest.accountInfo=t.profile.accountInfo})},t.loadAllResourceByFilter=function(){var e=n.loadAllUserResource(t.resourceFilter);t.resourceFilter.disabled=!0,e.then(function(e){t.resources=e.resources,e.resources.length==o.getPageSize()&&(t.resourceFilter.disabled=!1)})},t.loadNextResourcePage=function(){t.resourceFilter.pageNo++,t.resourceFilter.disabled=!0;var e=n.loadAllUserResource(t.resourceFilter);e.then(function(e){null!=e.resources&&e.resources.length>0&&(t.resources=t.resources.concat(e.resources),e.resources.length==o.getPageSize()&&(t.resourceFilter.disabled=!1))})},t.setFilter=function(e){t.resourceFilter={ownerId:t.userId,filterType:e,pageNo:1},t.loadAllResourceByFilter()},t.init=function(){t.loadProfileByUserId(),t.setFilter("ownResource")},t.viewResourceDetail=function(e){n.viewResourceDetail(e)},t.viewResourceAdd=function(){n.viewResourceAdd()},t.viewResourceUpdate=function(e){n.viewResourceUpdate(e)},t.toEditProfile=function(){t.isEditingProfile=!0,t.isEditingPaymentRequest=!1},t.toEditPaymentRequest=function(){t.isEditingProfile=!1,t.isEditingPaymentRequest=!0},t.returnProfile=function(){t.isEditingProfile=!1,t.isEditingPaymentRequest=!1},t.updateProfile=function(e){if(showLoading(),e.$valid){var r=i.updateProfile(t.profile);r.then(function(e){t.handleProfileValidationError(e)&&(hideLoading(),t.isEditingProfile=!1,showMessage("信息已更新","您已完成个人信息的更新！"))})}else hideLoading(),$("profile-form .submit-btn").animateCss("buttonshake")},t.addPaymentRequest=function(e){if(showLoading(),e.$valid){var r=a.addWithdrawRequest(t.paymentRequest);r.then(function(e){t.handlePaymentValidationError(e)&&(hideLoading(),t.isEditingPaymentRequest=!1,showMessage("取款申请提交成功","您的取款申请已提交，一般在2-3个工作日内完成打款，请注意查收大款确认邮件。"))})}else hideLoading(),$("payment-request-form .submit-btn").animateCss("buttonshake")},t.handleProfileValidationError=function(e){var t=!0;return"VALIDATION_FAILED"==e._resultCode&&(hideLoading(),e._errMsg.indexOf("error.resouce.exceedAddLimit")>=0&&showMessage("对不起，无法添加此资源","您今天已达到资源添加上限，无法继续添加资源。"),$("form.profile-form .submit-btn").animateCss("buttonshake"),t=!1),"SUCCESS"!=e._resultCode&&(t=!1),t},t.handlePaymentValidationError=function(e){var t=!0;return"VALIDATION_FAILED"==e._resultCode&&(hideLoading(),e._errMsg.indexOf("error.applyAmount.formatError")>=0?showMessage("对不起，无法提交申请","您录入的金额有误。"):e._errMsg.indexOf("error.applyAmount.lessThanLimit")>=0?showMessage("对不起，无法提交申请","每次取款金额不能小于50元。"):e._errMsg.indexOf("error.withdrawRequest.pendingExists")>=0?showMessage("对不起，无法提交申请","您有未处理完成的取款申请，请不要重复提交。"):e._errMsg.indexOf("error.applyAmount.exceedBalance")>=0&&showMessage("对不起，无法提交申请","提款金额不能超过账户余额。"),$("form.payment-request-form .submit-btn").animateCss("buttonshake"),t=!1),"SUCCESS"!=e._resultCode&&(t=!1),t},t.init()}]);var commentManager=angular.module("techmaskApp.commentManager",["ngResource","ngCookies","base64","techmaskApp.services"]),rankManager=angular.module("techmaskApp.rankManager",["ngResource","ngCookies","base64","techmaskApp.services"]);rankManager.controller("RankCtrl",["$rootScope","$scope","$routeParams","RankService",function(e,t,r,o){t.ranks=[],t.rankFilter={pageNo:1,disabled:!1,yearWeekInd:"THISWEEK",isLoading:!1},t.changeCategory=function(e){t.rankFilter.yearWeekInd=e,t.loadAllRank()},t.loadAllRank=function(){var e=o.loadAllRank(t.rankFilter);e.then(function(e){t.ranks=e.ranks})},t.loadNextRankPage=function(){t.rankFilter.pageNo++,t.rankFilter.disabled=!0;var e=o.loadAllRank(t.rankFilter);e.then(function(e){null!=e.ranks&&e.ranks.length>0&&(t.rankFilter.disabled=!1,t.ranks=t.ranks.concat(e.ranks))})},t.loadAllRank()}]);var sidebarManager=angular.module("techmaskApp.sidebarManager",["ngResource","ngCookies","base64","techmaskApp.services"]);sidebarManager.controller("ResourceArticleCtrl",["$rootScope","$scope",function(e,t){t.postList=[{title:"20张Cheat Sheet，让前端开发与设计效率x2",img:"img/post-list/4.jpg",href:"http://www.jianshu.com/p/bf266ec5a244",date:"04 Jun"},{title:"一名全栈设计师的Mac工具箱（设计,开发,效率）",img:"img/post-list/5.jpg",href:"http://www.jianshu.com/p/c271c1b05308",date:"04 May"},{title:"iOS开发完全自学资源集合",img:"img/post-list/6.jpg",href:"http://www.jianshu.com/p/d70041eb25d7",date:"27 March"}]}]),sidebarManager.controller("FeaturedResourceCtrl",["$rootScope","$scope",function(e,t){t.resourceList=[{title:"Sublime Text Tutorial",img:"img/resource-list/1.png",href:"/resource/152"},{title:"代码整洁之道",img:"img/resource-list/2.png",href:"/resource/129"},{title:"近百个iOS开发学习资源",img:"img/resource-list/3.png",href:"/resource/203"},{title:"前端设计与开发Cheat Sheet合集",img:"img/resource-list/4.png",href:"/resource/130"},{title:"Android 第一行代码",img:"img/resource-list/5.png",href:"/resource/104"},{title:"软件开发者路线图，从学徒到高手",img:"img/resource-list/6.png",href:"/resource/101"}]}]);var accountManager=angular.module("techmaskApp.accountManager",["ngAnimate","ngResource","ngCookies","base64","techmaskApp.services"]);accountManager.service("AccountService",["$http","$q","$global",function(e,t,r){this.addWithdrawRequest=function(o){var n=t.defer(),a=r.preparePath("/account/withdrawrequest");return e({method:"POST",url:a,data:o}).success(function(e,t,r,o){n.resolve(e)}).error(function(e,t,o,n){r.handleErrors(t)}),n.promise}}]),jQuery(document).on("ready",function(){!function($){DeadMenuConfig(),slidingGallery(),hiddenBarMenuConfig(),hiddenBarToggler(),thmAccrodion(),customTab(),$(".dialog-mask").click(function(){closeDialog()})}(jQuery)}),jQuery(window).on("load",function(){!function($){galleryMasonaryLayout(),SmoothMenuScroll(),customScrollBarHiddenSidebar(),handlePreloader(),progressBarConfig()}(jQuery)}),jQuery(window).on("scroll",function(){!function($){OnePageMenuScroll(),stickyHeader()}(jQuery)}),jQuery(window).on("resize",function(){!function($){hiddenBarMenuConfig()}(jQuery)}),$.fn.extend({animateCss:function(e){var t="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";$(this).addClass("animated "+e).one(t,function(){"fadeOut"==e&&$(this).hide(),$(this).removeClass("animated "+e)})}});
//# sourceMappingURL=./jijiangshe-min.js.map